# SpringBoot的run方法流程分析

![61080963898](assets/1610809751847.png)

# 1. 开始启动Springboot应用

![61080969735](assets/1610809697350.png)

# 2. 构建一个SpringBoot应用

![61081249186](assets/1610812491861.png) 

![61081061275](assets/1610810612750.png)

![61081482999](assets/1610814829992.png)

## 2.1.SpringApplication.run()启动此应用

![61081534938](assets/1610815349386.png) 

![61081534053](assets/1610815340530.png)

## 2.2.启动启动计时器开始计时应用启动监听器开始监听

![61081534938](assets/1610815349386.png) 

![61081573762](assets/1610815737623.png)

## 2.3.SpringApplicationRunListeners应用启动监听器模块 

## 2.4.ConfigurationEnvironment配置环境模块

### 2.4.1. 创建配置环境（web/noweb）

![61081534938](assets/1610815349386.png) 

![61081723084](assets/1610817230849.png)

![61081728158](assets/1610817281580.png)

### 2.4.1. 加载属性文件资源

![61081534938](assets/1610815349386.png) 

![61081737912](assets/1610817379125.png)

![61081754263](assets/1610817542636.png)

![61081762818](assets/1610817628187.png) 

![61081759512](assets/1610817595126.png)

### 2.4.1. 配置监听

![61081534938](assets/1610815349386.png) 

![61081821517](assets/1610818215176.png)

## 2.5.Banner配置SpringBoot彩蛋

![61081534938](assets/1610815349386.png) 

![61081581474](assets/1610815814743.png)

## 2.6.ConfigurableApplicationContext应用上下文模块

![61081534938](assets/1610815349386.png) 

![61081607987](assets/1610816079873.png)

### 2.6.1. 创建应用上下文对象（web/noweb）

![61081895880](assets/1610818958808.png) 

![61081895096](assets/1610818950965.png)

![61081897427](assets/1610818974272.png) 

![61081900597](assets/1610819005974.png)

### 2.6.2. 基础属性配置

![61081895880](assets/1610818958808.png) 

![61081939697](assets/1610819396970.png)

#### 2.6.2.1. 加载配置环境

![61081895880](assets/1610818958808.png) 

![61081984527](assets/1610819845275.png)

#### 2.6.2.2. ResourceLoader资源加载器

![61081895880](assets/1610818958808.png) 

![61082002001](assets/1610820020017.png)

![61082004002](assets/1610820040027.png)

![61082012695](assets/1610820126958.png)

#### 2.6.2.3. 配置监听

![61081895880](assets/1610818958808.png) 

![61082002001](assets/1610820020017.png)

![61082029380](assets/1610820293802.png)

![61082032335](assets/1610820323350.png) 

![61082031076](assets/1610820310766.png)

#### 2.6.2.4. 加载启动参数

![61081895880](assets/1610818958808.png) 

![61082044197](assets/1610820441976.png)

### 2.6.3. 更新应用上下文

![61081895880](assets/1610818958808.png) 

![61081952226](assets/1610819522266.png)

#### 2.6.3.1. 准备环境所需bean工程

![61081895880](assets/1610818958808.png) 

![61082128010](assets/1610821280102.png) 

#### 2.6.3.2. 通过工厂产生环境所需bean

![61082067261](assets/1610820672619.png)

![61082076556](assets/1610820765568.png)

![61081895880](assets/1610818958808.png) 

![61082095418](assets/1610820954185.png)

#### 2.6.3.3. 应用启动计时器结束计时应用启动监听器结束监听

![61081895880](assets/1610818958808.png) 

![61082155867](assets/1610821558679.png)

![61082156529](assets/1610821565292.png) 

#### 2.6.3.4. SpringApplication启动结束

![61082184159](assets/1610821841594.png) 

![61082095418](assets/1610820954185.png)

![61082185493](assets/1610821854939.png)

# 3. 初始化模块

![61081249186](assets/1610812491861.png) 

![61081035906](assets/1610810359069.png)

# 4. 配置source

![61081249186](assets/1610812491861.png) 

![61081074215](assets/1610810742150.png)

# 5. 配置是否web环境

![61081249186](assets/1610812491861.png) 

![61081076277](assets/1610810762779.png)

# 6. 创建初始化构造器

![61081249186](assets/1610812491861.png) 

![61081079755](assets/1610810797556.png)

![61081115491](assets/1610811154918.png)

## 6.1. 得到所需工厂集合的实例

![61081249186](assets/1610812491861.png) 

![61081217546](assets/1610812175467.png)

## 6.2. 获取传入的工厂类名、类加载器

![61081249186](assets/1610812491861.png) 

![61081224684](assets/1610812246843.png)

![61081285682](assets/1610812856822.png) 

![61081237378](assets/1610812373789.png)

## 6.3. 通过类加载器、获取指定的spring.factories文件

![61081285682](assets/1610812856822.png) 

![61081288017](assets/1610812880172.png)

![61081244379](assets/1610812443794.png)

## 6.4. 获取文件中工厂类的全路径

![61081249186](assets/1610812491861.png) 

![61081312453](assets/1610813124534.png)

## 6.5. 通过类路径反射得到工厂的class对象、构造方法

![61081249186](assets/1610812491861.png) 

![61081317586](assets/1610813175869.png)

![61081335555](assets/1610813355553.png)

## 6.6. 生成工厂实例返回

![61081249186](assets/1610812491861.png) 

![61081325619](assets/1610813256197.png)

# 7. 创建应用监听器

![61081249186](assets/1610812491861.png) 

![61081081632](assets/1610810816325.png)

# 8. 配置应用的主方法所在类

![61081249186](assets/1610812491861.png) 

![61081084105](assets/1610810841053.png)

